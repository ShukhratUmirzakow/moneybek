<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Expense Tracker</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0e0e0e;
      --card: #1a1a1a;
      --text: #fff;
      --green: #4caf50;
      --red: #f44336;
      --gray: #444;
      --accent: #e8e9e8;
      --different: black;
    }* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  font-family: 'Inter', sans-serif;
}

body {
  background: var(--bg);
  color: var(--text);
  display: flex;
  flex-direction: column;
  height: 100vh;
  overflow: hidden;
}

header {
  text-align: center;
  padding: 20px;
  margin-top: 20px;
}

header h1 {
  font-size: 2rem;
  margin-bottom: 5px;
}

header p {
  font-size: 0.9rem;
  color: #aaa;
}

.filters {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin: 10px 0;
}

.filters button {
  background: var(--different);
  border: none;
  padding: 6px 14px;
  border-radius: 20px;
  color: var(--text);
  font-size: 0.85rem;
}

.filters .active {
  background: var(--different);
  border: 2px solid var(--gray);
}

.transactions {
  flex: 1;
  overflow-y: auto;
  padding: 10px;
}

.transaction {
  background: var(--card);
  margin: 8px 0;
  padding: 12px;
  border-radius: 12px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.transaction .name {
  font-weight: 600;
}

.transaction .amount.green {
  color: var(--green);
}
.transaction .amount.red {
  color: var(--red);
}

.fab-container {
  position: fixed;
  bottom: 20px;
  left: 0;
  right: 0;
  display: flex;
  justify-content: center;
  gap: 40px;
}

.fab {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  font-size: 2rem;
  border: none;
  display: flex;
  justify-content: center;
  align-items: center;
  box-shadow: 0 4px 10px rgba(0,0,0,0.6);
}
.fab.green { background: var(--green); color: #fff; }
.fab.red { background: var(--red); color: #fff; }

/* Modal */
.modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  visibility: hidden;
}

.modal.active { visibility: visible; }

.modal-content {
  background: var(--card);
  padding: 20px;
  border-radius: 16px;
  width: 90%;
  max-width: 400px;
}

.modal-content h2 {
  margin-bottom: 10px;
  font-size: 1.2rem;
}

.modal-content input, .modal-content select {
  width: 100%;
  margin: 8px 0;
  padding: 10px;
  border-radius: 12px;
  border: none;
  background: var(--gray);
  color: var(--text);
}

.modal-content button {
  padding: 10px;
  border-radius: 12px;
  border: none;
  background: var(--accent);
  color: #000;
  font-weight: 600;
}

/* Fullscreen transactions */
.transactions.fullscreen {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--bg);
  padding: 20px;
  z-index: 100;
}

.fullscreen-toggle {
  position: absolute;
  top: 10px;
  right: 10px;
  background: var(--gray);
  border: none;
  border-radius: 10px;
  color: #fff;
  padding: 5px 10px;
}

/* Custom dropdown styles */
.custom-dropdown {
  position: relative;
  width: 100%;
  margin: 10px 0;
}

.dropdown-selected {
  background: var(--gray);
  color: var(--text);
  padding: 10px;
  border-radius: 12px;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.dropdown-options {
  position: absolute;
  top: 100%;
  left: 0;
  width: 100%;
  background: var(--card);
  border-radius: 12px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
  display: none;
  z-index: 10;
}

.dropdown-options.active {
  display: block;
}

.dropdown-option {
  padding: 10px;
  cursor: pointer;
  transition: background 0.3s;
}

.dropdown-option:hover {
  background: var(--gray);
}

/* Increment and decrement buttons */
.amount-container {
  display: flex;
  align-items: center;
  gap: 10px;
}

.amount-button {
  background: var(--gray);
  border: none;
  color: var(--text);
  font-size: 1rem;
  width: 30px;
  height: 30px;
  border-radius: 5px;
  cursor: pointer;
  display: flex;
  justify-content: center;
  align-items: center;
}

.amount-input {
  width: 100%;
  text-align: center;
  padding: 10px;
  border-radius: 12px;
  border: none;
  background: var(--gray);
  color: var(--text);
  font-size: 1rem;
}
  </style>
</head>
<body>
  <header>
    <h1 id="balance">$0.00</h1>
    <p id="summary">Inc: $0 – Exp: $0</p>
  </header>  <div class="filters">
    <button class="active" data-filter="daily">Daily</button>
    <button data-filter="weekly">Weekly</button>
    <button data-filter="monthly">Monthly</button>
    <button data-filter="yearly">Yearly</button>
  </div>  <div class="transactions" id="transactions">
    <button class="fullscreen-toggle" onclick="toggleFullscreen()">⛶</button>
  </div>  <div class="fab-container">
    <button class="fab green" onclick="openModal('income')">+</button>
    <button class="fab red" onclick="openModal('expense')">-</button>
  </div>  <!-- Modal -->  <div class="modal" id="modal">
    <div class="modal-content">
      <button class="cancel-button" onclick="closeModal()">×</button>
      <h2 id="modalTitle">Add</h2>
      <div class="amount-container">
        <button class="amount-button" onclick="adjustAmount(-1)">−</button>
        <input type="number" id="amount" class="amount-input" placeholder="Amount" />
        <button class="amount-button" onclick="adjustAmount(1)">+</button>
      </div>
      <div class="custom-dropdown" id="categoryDropdown">
        <div class="dropdown-selected" onclick="toggleDropdown()">Select Category                ⇅</div>
        <div class="dropdown-options" id="dropdownOptions"></div>
      </div>
      <input type="text" id="note" placeholder="Note (optional)" />
      <button onclick="saveTransaction()">Save</button>
    </div>
  </div>  <script>
  let transactions = JSON.parse(localStorage.getItem('transactions')) || [];
  let currentType = 'income';
  let currentCategory = '';
  const categories = {
    income: ['Salary', 'Bonus', 'Other'],
    expense: ['Food', 'Transport', 'Bills', 'Shopping', 'Other']
  };

  function renderTransactions() {
    const list = document.getElementById('transactions');
    list.innerHTML = '<button class="fullscreen-toggle" onclick="toggleFullscreen()">⛶</button>';
    let income = 0, expenses = 0;

    const filteredTransactions = transactions.filter(t => {
      const now = new Date();
      const transactionDate = new Date(t.date);
      if (currentFilter === 'daily') {
        return transactionDate.toDateString() === now.toDateString();
      } else if (currentFilter === 'weekly') {
        const weekStart = new Date(now.setDate(now.getDate() - now.getDay()));
        const weekEnd = new Date(weekStart);
        weekEnd.setDate(weekStart.getDate() + 6);
        return transactionDate >= weekStart && transactionDate <= weekEnd;
      } else if (currentFilter === 'monthly') {
        return transactionDate.getMonth() === now.getMonth() && transactionDate.getFullYear() === now.getFullYear();
      } else if (currentFilter === 'yearly') {
        return transactionDate.getFullYear() === now.getFullYear();
      }
      return true;
    });

    filteredTransactions.forEach((t, i) => {
      const div = document.createElement('div');
      div.className = 'transaction';
      div.innerHTML = `<div><div class="name">${t.note || t.category}</div><div class="cat">${t.category}</div></div>
                       <div class="amount ${t.type == 'income' ? 'green' : 'red'}">${t.type == 'income' ? '+' : '-'}UZS ${Math.round(t.amount).toLocaleString()}</div>`;
      list.appendChild(div);

      if (t.type === 'income') income += t.amount;
      else expenses += t.amount;
    });

    document.getElementById('balance').innerText = `UZS ${(income - expenses).toLocaleString()}`;
    document.getElementById('summary').innerText = `Income: UZS ${Math.round(income).toLocaleString()} – Expenses: UZS ${Math.round(expenses).toLocaleString()}`;
    localStorage.setItem('transactions', JSON.stringify(transactions));
  }

  function openModal(type) {
    currentType = type;
    currentCategory = '';
    document.getElementById('modal').classList.add('active');
    document.getElementById('modalTitle').innerText = type === 'income' ? 'Add Income' : 'Add Expense';
    renderDropdownOptions();
  }

  function renderDropdownOptions() {
    const dropdownOptions = document.getElementById('dropdownOptions');
    dropdownOptions.innerHTML = '';
    categories[currentType].forEach(category => {
      const option = document.createElement('div');
      option.className = 'dropdown-option';
      option.innerText = category;
      option.onclick = () => selectCategory(category);
      dropdownOptions.appendChild(option);
    });
  }

  function toggleDropdown() {
    document.getElementById('dropdownOptions').classList.toggle('active');
  }

  function selectCategory(category) {
    currentCategory = category;
    document.querySelector('.dropdown-selected').innerText = category + ' ⋁';
    document.getElementById('dropdownOptions').classList.remove('active');
  }

  function adjustAmount(value) {
    const amountInput = document.getElementById('amount');
    const currentValue = parseFloat(amountInput.value) || 0;
    amountInput.value = Math.max(0, currentValue + value);
  }

  function saveTransaction() {
    const amount = parseFloat(document.getElementById('amount').value) * 1000;
    const note = document.getElementById('note').value;
    if (!amount || !currentCategory) return;
    transactions.push({ type: currentType, amount, note, category: currentCategory, date: new Date().toISOString() });
    document.getElementById('modal').classList.remove('active');
    document.getElementById('amount').value = '';
    document.getElementById('note').value = '';
    renderTransactions();
  }

  function toggleFullscreen() {
    document.getElementById('transactions').classList.toggle('fullscreen');
  }

  function setFilter(filter) {
    currentFilter = filter;
    document.querySelectorAll('.filters button').forEach(btn => btn.classList.remove('active'));
    document.querySelector(`.filters button[data-filter="${filter}"]`).classList.add('active');
    renderTransactions();
  }

  function closeModal() {
    document.getElementById('modal').classList.remove('active');
    document.getElementById('amount').value = '';
    document.getElementById('note').value = '';
  }

  document.querySelectorAll('.filters button').forEach(btn => {
    btn.addEventListener('click', () => setFilter(btn.getAttribute('data-filter')));
  });

  // Set default filter to "Monthly" on app load
  window.addEventListener('load', () => {
    setFilter('monthly');
  });

  renderTransactions();
</script></body>
</html>
